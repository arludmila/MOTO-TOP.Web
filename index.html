<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>MOTO-TOP</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body class="d-flex flex-column h-100">
    <main class="flex-shrink-0">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container px-5">
                <a class="navbar-brand" href="/index.html">MOTO-TOP</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link" href="order-status.html">Consultar Pedido</a></li>
                        <li class="nav-item"><a class="nav-link" href="contact.html">Solicitar Visita</a></li>          
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Page content-->
        <section class="py-5">
            <div class="container px-5">
                <!-- Contact form-->
                <div class="bg-light rounded-3 py-5 px-4 px-md-5 mb-5">
                    <div class="text-center mb-5">
                        <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-envelope"></i></div>
                        <h1 class="fw-bolder">Solicitar visita</h1>
                        <p class="lead fw-normal text-muted mb-0">Solicitar visita de un vendedor</p>
                    </div>
                    <div class="row gx-5 justify-content-center">
                        <div class="col-lg-8 col-xl-6">
                            <!-- * * * * * * * * * * * * * * *-->
                            <!-- * * Forms Contact Form * *-->
                            <!-- * * * * * * * * * * * * * * *-->
                            
                            <form action="" method="post" onsubmit="enviarFormulario(event)">
                                <!-- First Name input-->
                                <div class="form-floating mb-3">
                                    <input name="first_name" class="form-control" id="first_name" type="text" placeholder="Ingrese su nombre..." required autocomplete="given-name" />
                                    <label for="first_name">Nombre</label>
                                </div>
                                <!-- Last Name input-->
                                <div class="form-floating mb-3">
                                    <input name="last_name" class="form-control" id="last_name" type="text" placeholder="Ingrese su apellido..." required autocomplete="family-name" />
                                    <label for="last_name">Apellido</label>
                                </div>
                                <!-- Email address input-->
                                <div class="form-floating mb-3">
                                    <input name="email" class="form-control" id="email" type="email" placeholder="name@example.com" required autocomplete="email" />
                                    <label for="email">Email</label>
                                </div>
                                <!-- Phone number input-->
                                <div class="form-floating mb-3">
                                    <input name="phone_number" class="form-control" id="phone_number" type="tel" placeholder="3333-559922" required autocomplete="off" />
                                    <label for="phone_number">Número de Teléfono</label>
                                </div>
                                <!-- Provincia select -->
                                <div class="form-floating mb-3">
                                    <select name="province" class="form-select" id="province" onchange="actualizarCiudades()" required>
                                        <option value="" disabled selected>Seleccione una provincia</option>
                                        <option value="Corrientes">Corrientes</option>
                                        <option value="Chaco">Chaco</option>
                                        <option value="Misiones">Misiones</option>
                                    </select>
                                    <label for="province">Provincia</label>
                                </div>
                                <!-- Ciudad select -->
                                <div class="form-floating mb-3">
                                    <select name="city" class="form-select" id="city" required>
                                        
                                    </select>
                                    <label for="city">Ciudad</label>
                                </div>
                                <!-- Direccion select -->
                                <div class="form-floating mb-3">
                                    <input name="address" class="form-control" id="address" type="text" placeholder="Ingrese su dirección..." required autocomplete="off" />
                                    <label for="address">Dirección</label>
                                </div>
                                <!-- Message input-->
                                <div class="form-floating mb-3">
                                    <input name="message" class="form-control" id="message" type="text" placeholder="Ingrese su mensaje..." style="height: 10rem" required autocomplete="off">
                                    <label for="message">Mensaje</label>
                                </div>
                                <!-- Submit Button-->
                                <button class="btn btn-primary btn-lg" id="submitButton" type="submit" >Enviar</button>
                            </form>
                            
                        </div>
                    </div>
                </div>
                <!-- Contact cards-->
                <div class="row gx-5 row-cols-2 row-cols-lg-2 py-5">
                    <div class="col">
                        <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-envelope"></i></div>
                        <div class="h5 mb-2">Envíanos un correo</div>
                        <p class="text-muted mb-0">Envía un correo a <u>soporte@mototop.com</u> y nuestro equipo te responderá en breve.</p>
                    </div>

                    <div class="col">
                        <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-telephone"></i></div>
                        <div class="h5">Llámanos</div>
                        <p class="text-muted mb-0">Llámanos durante el horario comercial al (555) 892-9403.</p>
                    </div>
                </div>

            </div>
        </section>

    </main>
    <!-- Footer-->
    <footer class="bg-dark py-4 mt-auto">
        <div class="container px-5">
            <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; MOTO-TOP 2023</div></div>
                <div class="col-auto">
                    <a class="link-light small" href="#!">Privacy</a>
                    <span class="text-white mx-1">&middot;</span>
                    <a class="link-light small" href="#!">Terms</a>
                    <span class="text-white mx-1">&middot;</span>
                    <a class="link-light small" href="#!">Contact</a>
                </div>
            </div>
        </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>

    <script>
        const ciudadesPorProvincia = {
            Corrientes: ["Corrientes",
                            "Goya",
                            "Mercedes",
                            "Curuzú Cuatiá",
                            "Esquina",
                            "Ituzaingó",
                            "Paso de los Libres",
                            "Santo Tomé",
                            "Monte Caseros",
                            "Bella Vista"],
            Chaco: ["Resistencia",
                    "Roque Sáenz Peña",
                    "Villa Ángela",
                    "Charata",
                    "Juan José Castelli",
                    "General José de San Martín",
                    "Barranqueras"],
            Misiones: ["Posadas",
                        "Puerto Iguazú",
                        "Eldorado",
                        "Oberá",
                        "Apostoles",
                        "San Vicente",
                        "Garupá",
                        "Montecarlo",
                        "Alem",
                        "Jardín América"]
            // Agrega más ciudades según sea necesario
        };

        function actualizarCiudades() {
            const provinciaSeleccionada = document.getElementById("province").value;
            const ciudadSelect = document.getElementById("city");

            // Limpia las opciones actuales
            ciudadSelect.innerHTML = "";

            // Agrega las nuevas opciones según la provincia seleccionada
            ciudadesPorProvincia[provinciaSeleccionada].forEach(ciudad => {
                const opcion = document.createElement("option");
                opcion.value = ciudad;
                opcion.textContent = ciudad;
                ciudadSelect.appendChild(opcion);
            });
        }
    </script>
    <script>
        function enviarFormulario(event) {
            event.preventDefault(); // Evita la recarga de la página al enviar el formulario

            // Obtiene los valores de los campos del formulario
            const firstName = document.getElementById("first_name").value;
            const lastName = document.getElementById("last_name").value;
            const email = document.getElementById("email").value;
            const phoneNumber = document.getElementById("phone_number").value;
            const province = document.getElementById("province").value;
            const city = document.getElementById("city").value;
            const address = document.getElementById("address").value;
            const message = document.getElementById("message").value;

            // Combina provincia, ciudad y dirección en un solo campo "location"
            const location = `${province}, ${city}, ${address}`;

            // Construye el objeto JSON con los datos del formulario
            const formData = {
                firstName,
                lastName,
                email,
                phoneNumber,
                message,
                location
            };

            // Realiza la solicitud POST a la API
            fetch("https://moto-top.azurewebsites.net/api/seller-clients", {
    method: "POST",
    headers: {
        "Content-Type": "application/json"
    },
    body: JSON.stringify(formData)
})

            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                // Manejar la respuesta de la API si es necesario
                console.log("Respuesta de la API:", data);
                // Puedes agregar lógica adicional aquí según la respuesta de la API
            })
            .catch(error => {
                console.error("Error al enviar el formulario:", error);
            });
        }
    </script>
</body>
</html>
